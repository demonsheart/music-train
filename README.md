# 🎵 Music Train

一个免费的Flutter音乐训练应用，旨在帮助乐手提升基础音乐理论能力。

## 📱 关于项目

由于市面上很多乐器辅助学习工具需要付费，因此开发了这个免费的音乐训练应用。核心目标是提升乐手的底层能力，包括音名反应、和弦识别、节奏训练等。

### 技术栈

- **框架**: Flutter
- **语言**: Dart
- **状态管理**: State Management
- **目标平台**: Web (可扩展至iOS/Android)

## 🎯 核心功能

### ✅ 已实现功能 (v1.3)

#### 🎼 十二个调级数与音名反应训练

**核心训练功能：**

1. **调性选择** 🎹
   - 进入训练时先选择要练习的调性
   - 支持12个半音的所有调性选择
   - 可随时更换当前训练调性
   - 适合初学者固定调性练习

2. **正向练习训练** 🔄
   - 基于用户选择的固定调性
   - 提示当前大调/小调
   - 显示级数，用户选择对应音名
   - 实时答案校验和反馈

3. **反向练习训练** 🔄
   - 基于用户选择的固定调性
   - 提示当前大调/小调
   - 显示音名，用户选择对应级数
   - 实时答案校验和反馈

4. **调性切换** 🎹
   - 支持大调/小调实时切换
   - 自动更新训练内容和正确答案

5. **交互式答案选择** 🎯
   - 12个音名选择按钮 (C, C#, D, D#, E, F, F#, G, G#, A, A#, B)
   - 7个级数选择按钮 (I, II, III, IV, V, VI, VII)
   - 按钮点击动画效果

6. **实时反馈系统** ⚡
   - 答案正确/错误动画反馈
   - 得分系统 (答对+10分)
   - 连续答对计数器
   - 实时分数和连续数显示

7. **交互式答案选择** 🎯
   - 12个音名选择按钮 (C, C#, D, D#, E, F, F#, G, G#, A, A#, B)
   - 7个级数选择按钮 (I, II, III, IV, V, VI, VII)
   - 按钮点击动画效果
   - 智能按钮内反馈系统

8. **智能反馈系统** ⚡
   - 按钮内直接显示答题结果，无全屏弹窗干扰
   - 正确答案：绿色勾号标记
   - 错误答案：红色叉号标记
   - 答错时高亮显示正确答案（琥珀色灯泡图标）
   - 图标位于按钮右上角外部，不遮挡内容
   - 1.5秒自动进入下一题

9. **用户体验优化** ✨
   - 流畅的页面切换动画
   - 启动页面动画
   - 现代化UI设计
   - 响应式按钮交互

### 🎵 音乐理论逻辑

**准确的音乐理论计算：**
- 大调音阶：全全半全全全半 (W-W-H-W-W-W-H)
- 小调音阶：全半全全半全全 (W-H-W-W-H-W-W)
- 支持所有12个调的大调和小调计算
- 用户固定调性练习，专注学习单个调性

### 🚀 计划功能

- 🎸 和弦训练
- 🥁 节奏训练
- 🎹 音阶训练
- 🎺 即兴训练
- 🎼 和弦配对音阶
- 🔄 和弦走向训练
- ⭕ 五度圈训练
- 📊 数据统计和历史记录
- 🏆 更多成就系统

## 🚀 快速开始

### 环境要求

- Flutter SDK: >=3.0.0
- Dart SDK: >=3.0.0
- Chrome浏览器 (用于Web版本)

### 安装和运行

1. **克隆项目**
   ```bash
   git clone https://github.com/demonsheart/music-train.git
   cd music-train
   ```

2. **安装依赖**
   ```bash
   flutter pub get
   ```

3. **运行应用 (Web版本)**
   ```bash
   flutter run -d chrome
   ```

4. **热重载**
   - 在运行中按 `r` 键进行热重载
   - 按 `R` 键进行热重启

## 📁 项目结构

```
lib/
├── screens/                    # 页面组件
│   ├── home_screen_simple.dart     # 主页
│   ├── training_screen_basic.dart  # 训练页面
│   └── splash_screen.dart          # 启动页面
├── services/                   # 服务层
│   └── music_theory_logic.dart     # 音乐理论逻辑
├── widgets/                    # 自定义组件
│   ├── answer_button.dart         # 答案选择按钮
│   └── feedback_overlay.dart       # 反馈动画覆盖层
└── main.dart                   # 应用入口
```

## 🎮 使用说明

### 启动应用
1. 打开应用后会看到启动动画
2. 自动跳转到主页面
3. 点击"开始训练"进入训练界面

### 训练界面操作

#### 调性选择
1. 进入训练界面后，首先显示调性选择界面
2. 从12个调性按钮中选择要练习的调性
3. 选择后自动开始该调性的训练
4. 训练过程中可点击编辑按钮重新选择调性

#### 调性和模式控制
- **调性切换**: 点击"大调"/"小调"按钮切换当前调性
- **练习模式切换**: 点击"正向练习"/"反向练习"按钮切换训练模式

#### 正向练习模式 (级数 → 音名)
1. 查看当前固定调性 (例如: "C 大调")
2. 查看显示的级数 (例如: "I")
3. 从下方12个音名按钮中选择正确答案
4. 系统会在按钮内实时反馈答案是否正确
5. **答对时**：选择按钮显示绿色勾号
6. **答错时**：选择按钮显示红色叉号，同时正确答案按钮显示琥珀色灯泡
7. 1.5秒后自动生成下一题（继续在相同调性下练习）

#### 反向练习模式 (音名 → 级数)
1. 查看当前固定调性 (例如: "G 小调")
2. 查看显示的音名 (例如: "D#")
3. 从下方7个级数按钮中选择正确答案
4. 系统会在按钮内实时反馈答案是否正确
5. **答对时**：选择按钮显示绿色勾号
6. **答错时**：选择按钮显示红色叉号，同时正确答案按钮显示琥珀色灯泡
7. 1.5秒后自动生成下一题（继续在相同调性下练习）

#### 分数系统
- **答对一题**: +10分
- **连续答对**: 连续数会增加
- **答错**: 连续数重置为0
- 分数和连续数实时显示在顶部状态栏

## 🎨 设计特色

### 🎯 核心设计理念
- **准确性**: 音乐理论计算完全准确
- **简洁性**: 界面干净整洁，功能明确
- **流畅性**: 动画过渡自然，用户体验流畅
- **实用性**: 真正帮助用户提升音乐理论能力

### ✨ 视觉设计
- **现代化UI**: 采用Material Design 3.0
- **渐变背景**: 蓝紫色渐变，视觉效果优雅
- **卡片式布局**: 信息层次清晰
- **动画效果**: 启动动画、按钮点击动画、反馈动画
- **中文界面**: 完全中文化的用户体验
- **调性选择界面**: 专门为初学者设计的友好界面
- **智能反馈图标**: 右上角外部显示，不遮挡内容的精致图标设计

### 🎵 交互设计
- **即时反馈**: 答题后立即在按钮内显示正确/错误反馈
- **按钮动画**: 点击时的缩放效果
- **状态显示**: 实时显示分数和连续答对数
- **无缝切换**: 模式切换后立即生成新题目
- **学习导向**: 答错时显示正确答案，帮助用户学习
- **无干扰体验**: 按钮内反馈，避免全屏弹窗打断训练节奏

## 🔧 技术实现

### 音乐理论算法
```dart
// 大调音阶: 全全半全全全半
static const List<int> majorScaleIntervals = [0, 2, 4, 5, 7, 9, 11];

// 小调音阶: 全半全全半全全
static const List<int> minorScaleIntervals = [0, 2, 3, 5, 7, 8, 10];
```

### 答案验证逻辑
- 支持正向练习 (级数 → 音名)
- 支持反向练习 (音名 → 级数)
- 实时验证答案正确性
- 自动计算得分和连续数

### 响应式布局
- 4列网格布局适配不同屏幕
- 按钮大小自适应
- 文字大小动态调整

## 🧪 测试建议

### 功能测试
1. **正向练习测试**: 在C大调下，级数I应该对应音名C
2. **反向练习测试**: 在A小调下，音名C应该对应级数III
3. **调性切换测试**: 切换大调/小调后，答案应该相应变化
4. **模式切换测试**: 切换练习模式后，界面应该正确更新

### 用户体验测试
1. **按钮响应**: 点击按钮应该有视觉反馈
2. **动画流畅**: 所有动画应该流畅无卡顿
3. **反馈及时**: 答题后应该立即显示反馈
4. **界面美观**: 在不同屏幕尺寸下都应该美观

## 🤝 贡献指南

欢迎提交Issue和Pull Request！

### 开发流程
1. Fork项目
2. 创建功能分支
3. 提交更改
4. 推送到分支
5. 创建Pull Request

## 📄 许可证

本项目采用MIT许可证 - 查看 [LICENSE](LICENSE) 文件了解详情。

## 🙏 致谢

感谢所有为音乐教育做出贡献的开发者和音乐家！

---

**开始你的音乐学习之旅吧！** 🎵